<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FocusAI</title>
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <div id="app">
    <div class="header">
      <h1>FocusAI</h1>
      <div id="status-dot" class="dot stopped" title="stopped"></div>
    </div>

    <div class="layout">
      <div id="left">
        <div id="todos" class="card">
          <div class="row" style="justify-content:space-between">
            <div class="tasks-title">Today's Most Important Tasks!</div>
            <button id="clear-done" class="ghost">Clear done</button>
          </div>
          <div class="row">
            <input id="new-task" type="text" placeholder="Add a task and press Enter" style="flex:1" />
          </div>
          <ul id="task-list"></ul>
          <div id="confetti" aria-hidden="true"></div>
        </div>
      </div>
      <div id="right">
        <div class="bubble-wrap">
          <button id="bubble" aria-label="Start/Stop Focus">
            <div id="progress" aria-hidden="true"></div>
            <span id="time">25:00</span>
          </button>
          <div id="subtext">click to start • click again to stop</div>
        </div>

        <div class="controls row">
          <label for="duration" class="muted">Minutes</label>
          <input id="duration" type="range" min="5" max="30" step="5" value="25" />
          <span id="duration-value">25</span>
        </div>

        <div id="track-card" class="card hidden">
          <div class="row">
            <div class="pill" id="track-frequency">— Hz</div>
            <div id="track-name">—</div>
          </div>
          <iframe id="player" style="border-radius:12px" width="100%" height="80"
            frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
            loading="lazy"></iframe>
          <div class="row meta">
            <a id="open-spotify" target="_blank" rel="noopener">Open in Spotify</a>
            <button id="skip" class="ghost">Skip</button>
          </div>
        </div>
      </div>
    </div>

    <div id="view-login" class="card hidden" style="margin-top:12px">
      <div class="row" style="justify-content:space-between">
        <div class="tasks-title">Login to Spotify</div>
      </div>
      <div class="muted" style="margin:6px 0 10px">Connect your Spotify Premium account to play full tracks.</div>
      <button id="login-spotify" class="ghost">Login with Spotify</button>
      <div class="muted" style="margin-top:8px;font-size:11px">You'll be redirected to Spotify to approve access.</div>
      
      <div style="margin-top:12px;padding-top:12px;border-top:1px solid #232638">
        <div class="muted" style="margin-bottom:6px;font-size:11px">Your Redirect URI for Spotify Dashboard:</div>
        <div id="redirect-uri-display" style="background:#1d2332;padding:8px;border-radius:6px;font-size:11px;word-break:break-all;font-family:monospace;color:#7ae0ff"></div>
        <button id="copy-redirect-uri" class="ghost" style="margin-top:6px;width:100%">Copy Redirect URI</button>
      </div>
    </div>
  </div>

  <script src="popup.js" type="module"></script>
</body>
</html>